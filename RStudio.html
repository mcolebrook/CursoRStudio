<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Profesores:  Carlos Pérez González  Marcos Colebrook Santamaría  (curso de la Fundación General ULL)" />
  <meta name="date" content="2014-01-01" />
  <title>Curso introductorio de   Introducción a la interfaz RStudio</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="http://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Curso introductorio de <img src="figure/Rlogo.jpg" /> </br> Introducción a la interfaz RStudio</h1>
  <p class="author">
Profesores: </br> Carlos Pérez González </br> Marcos Colebrook Santamaría </br> (curso de la Fundación General ULL)
  </p>
  <p class="date">2014</p>
</div>
<div id="contenidos" class="slide section level1">
<h1>Contenidos</h1>
<ul>
<li>¿Qué es RStudio?</li>
<li>Vistazo rápido y características de RStudio</li>
<li>Instalación de RStudio</li>
<li>Descripción del entorno</li>
<li>Primer proyecto dentro de RStudio</li>
<li>Cargar y guardar datos en el proyecto</li>
<li>Gestión del historial</li>
<li>Primer script en RStudio</li>
<li>Usando la ayuda</li>
<li>Extracción y ejecución de funciones</li>
<li>Secciones, plegado y navegación de código</li>
<li>Visualización de datos</li>
<li>Los comandos <code>plot</code>, <code>qplot</code> y <code>manipulate</code></li>
<li>Instalación de paquetes en RStudio</li>
<li>Generando informes HTML a partir de scripts de R</li>
<li>Atajos de teclado</li>
<li>Ejercicios</li>
<li>Futuro de RStudio</li>
<li>Referencias</li>
</ul>
</div>
<div id="qué-es-rstudio" class="slide section level1">
<h1>¿Qué es RStudio?</h1>
<ul>
<li>RStudio es una herramienta <strong>IDE (<em>Integrated Development Environment</em>)</strong> para <strong>R</strong>, libre y gratuita que facilita:
<ul>
<li>Trabajar con R y gráficos de R de forma interactiva.</li>
<li>Organizar el código y mantener múltiples proyectos.</li>
<li>Mantenimiento de los paquetes de R.</li>
<li>Crear y compartir informes.</li>
<li>Compartir código y colaborar con otros usuarios.</li>
</ul></li>
<li>RStudio fue fundado por J.J. Allaire, y también es una empresa que se dedica a vender servicios de consultoría y formación.</li>
<li>RStudio <strong>NO</strong> realiza ninguna operación estadística. Solo facilita realizar dichas operaciones sobre R.</li>
</ul>
<center>
<img src="figure/RStudio_preview.png" width="80%" alt="RStudio"/>
</center>


</div>
<div id="características-de-rstudio" class="slide section level1">
<h1>Características de RStudio</h1>
<ul>
<li>Integración de la consola de R: se pueden teclear comandos de R directamente en la consola de RStudio.</li>
<li>Ejecución de código: permite ejecutar código directamente del fichero de script.</li>
<li>Resaltado de la sintaxis: realiza una coloración automática de los instrucciones y de las funciones.</li>
<li>Ayuda con los paréntesis, corchetes y comillas: autocompleta estos símbolos al abrirlos.</li>
<li>Completado de comandos: completa los comandos mientras se escriben usando la tecla <code>Tab</code>.</li>
<li>Atajos de teclado.</li>
<li>Navegador de objetos: se pueden inspeccionar todos los objetos de la sesión R.</li>
<li>Gestión del historial de comandos: para poder usarlos de nuevo.</li>
<li>Navegación del código: permite saltar entre funciones dentro del código.</li>
<li>Importación y visualización de datos: en formato de tabla.</li>
<li>Integración de gráficos: manipulación, zoom y exportación.</li>
<li>Gestión de proyectos: se puede cambiar de un proyecto a otro fácilmente.</li>
<li>Control de versiones: se integra bien con <code>git</code> y <code>svn</code>.</li>
<li>Generación de documentos: del tipo PDF, HTML y otros más avanzados con un solo click.</li>
</ul>
</div>
<div id="instalación-de-rstudio" class="slide section level1">
<h1>Instalación de RStudio</h1>
<ul>
<li>Antes de instalar RStudio, necesitas instalar <strong>R</strong>. Se puede obtener desde:
<ul>
<li><a href="http://cran.r-project.org">cran.r-project.org</a></li>
</ul></li>
<li>Una vez instalado R, se puede instalar RStudio en tu ordenador (versión <strong>Desktop</strong>) dependiendo del sistema operativo:
<ul>
<li><a href="http://www.rstudio.com/ide/download/desktop">www.rstudio.com/ide/download/desktop</a></li>
</ul></li>
<li>Solo en Linux, también se puede instalar <strong>RStudio Server</strong>, el cual permite acceder al entorno desde un navegador web:
<ul>
<li><a href="http://www.rstudio.com/ide/server">www.rstudio.com/ide/server</a></li>
</ul></li>
</ul>
</div>
<div id="descripción-del-entorno" class="slide section level1">
<h1>Descripción del entorno</h1>
<ul>
<li>Editor de código fuente (scripts) y visor de datos: permite editar código fuente R y ver los datos del tipo data.frame.</li>
<li>Espacio de trabajo e historial: muestra los objetos (datos/variables) usados en la sesión actual y el historial de comandos.</li>
<li>Consola R: permite trabajar con R directamente.</li>
<li>Ficheros, visualizaciones, ayuda y paquetes: permite navegar por los ficheros y carpetas, mostrar los gráficos y visualizaciones, usar la ayuda, e instalar paquetes o cargar paquetes ya instalados.</li>
<li>Todos los paneles permiten ser minimizados o maximizados, como ventanas normales de Windows.</li>
</ul>
<center>
<img src="figure/RStudio_panels.png" width="80%" alt="Paneles de RStudio"/>
</center>


</div>
<div id="primer-proyecto-dentro-de-rstudio" class="slide section level1">
<h1>Primer proyecto dentro de RStudio</h1>
<ul>
<li>Para crear un proyecto, vamos a la esquina derecha de la barra de herramientas:</li>
</ul>
<center>
<img src="figure/New_Project_toolbar.png" alt="Proyecto de RStudio"/>
</center>

<ul>
<li>También podemos hacer lo mismo desde <strong>File &gt; New Project...</strong></li>
<li>Le vamos a poner el nombre <strong>proyectoR</strong>.</li>
</ul>
<center>
<img src="figure/Create_Project_From.png" width="40%" alt="Crear nuevo proyecto"/> <img src="figure/Empty_Project.png" width="40%" alt="Proyecto vacío"/> <img src="figure/Create_New_Project.png" width="40%" alt="Nombre del nuevo proyecto"/> <img src="figure/proyectoR.png" width="80%" alt="proyectoR"/>
</center>


</div>
<div id="directorios-del-proyecto" class="slide section level1">
<h1>Directorios del proyecto</h1>
<ul>
<li>Normalmente, para proyectos simples, podemos poner todos los ficheros (scripts de R, datos, docs, informes, etc) en la misma carpeta del proyecto.</li>
<li>Sin embargo, es una buena práctica, crear los siguientes directorios en cada proyecto:
<ul>
<li><code>R</code>: contendrá los scripts de R que se vayan desarrollando.</li>
<li><code>data</code>: almacenará los datos necesarios para realizar los análisis.</li>
<li><code>doc</code>: contendrá toda la documentación necesario para los análisis.</li>
<li><code>informes</code>: carpeta que guardará los informes generados por los análisis.</li>
</ul></li>
<li><p>En principio, solo vamos a crear las carpetas <code>R</code> y <code>data</code>.</p></li>
<li><p>Vamos al panel de ficheros:</p></li>
</ul>
<center>
<img src="figure/New_Folder.png" alt="Nueva carpeta"/>
</center>

<ul>
<li>Hacemos clic en <strong>New Folder</strong>, y le damos el nombre <code>R</code>.</li>
<li>Haremos lo mismo para crear la carpeta <code>data</code>.</li>
<li>Por tanto, la carpeta del proyecto quedaría como:</li>
</ul>
<center>
<img src="figure/proyectoR_folder.png" alt="Carpeta proyectoR"/>
</center>


</div>
<div id="cargar-datos-en-el-proyecto" class="slide section level1">
<h1>Cargar datos en el proyecto</h1>
<ul>
<li>Vamos a cargar unos datos para poder empezar a trabajar:</li>
</ul>
<center>
<img src="figure/Import_DataSet.png" alt="Importar datos"/>
</center>

<ul>
<li>Aquí podemos elegir:
<ul>
<li>Cargar los datos desde un fichero de texto (<strong>From Text File…</strong>).</li>
<li>O desde una URL de una web (<strong>From Web URL…</strong>).</li>
</ul></li>
<li>Desde esta URL podemos descargar el fichero <code>ddt.txt</code>, o usarla directamente:
<ul>
<li><a href="http://mcolebrook.github.io/CursoRStudio/data/ddt.csv">http://mcolebrook.github.io/CursoRStudio/data/ddt.csv</a></li>
</ul></li>
</ul>
<!---
[http://dl.dropboxusercontent.com/u/27980918/RStudio/ddt.txt](http://dl.dropboxusercontent.com/u/27980918/RStudio/ddt.txt)
--> 


</div>
<div id="el-fichero-ddt.txt" class="slide section level1">
<h1>El fichero <code>ddt.txt</code></h1>
<ul>
<li>En este archivo se recogen las siguientes variables sobre una muestra de n=144 peces:
<ul>
<li><code>group</code>: Grupo de observaciones (mediciones en dos temporadas).</li>
<li><code>location</code>: Lugar de medición.</li>
<li><code>species_name</code>: Nombre de la especie del pez.</li>
<li><code>species</code>: Código de especie (de 1 a 3).</li>
<li><code>length</code>: Longitud del pez.</li>
<li><code>weight</code>: Peso del pez.</li>
<li><code>distance</code>: Distancia del lugar a la desembocadura del río.</li>
<li><code>DDT_conc</code>: Concentración de DDT (% de peso) medida.</li>
</ul></li>
</ul>
<center>
<img src="figure/Import_DataSet_ddt.png" width="80%" alt="Importar datos"/>
</center>

<ul>
<li>El fichero procede de datos sobre concentración de DDT en peces de río.</li>
<li>RStudio deduce casi todas las opciones de importación:
<ul>
<li><strong>Heading</strong>: si trae el nombre de la variable.</li>
<li><strong>Separator</strong>: tipo de separador entre datos.</li>
<li><strong>Decimal</strong>: símbolo para el punto decimal.</li>
<li><strong>Quote</strong>: símbolo para los comentarios.</li>
</ul></li>
<li>Al final, los datos se cargan en un <code>data.frame</code> de R con el mismo nombre que el fichero de datos (<code>ddt</code>).</li>
</ul>
</div>
<div id="datos-cargados-en-rstudio" class="slide section level1">
<h1>Datos cargados en RStudio</h1>
<center>
<img src="figure/ddt_data_frame.png" width="80%" alt="Importar datos"/>
</center>

<ul>
<li>Los datos cargados se muestran en el panel superior izquierdo, y en el panel de espacio de trabajo (o entorno).</li>
<li>Vamos a guardar estos datos en un fichero CSV (<em>comma separated values</em>) en el directorio <code>data</code> de nuestro proyecto.</li>
<li>Para ello, empezaremos a usar la consola de R, y las funciones incorporadas de completado de comandos y de nombres de carpetas/ficheros.</li>
</ul>
</div>
<div id="guardar-datos-en-formato-csv" class="slide section level1">
<h1>Guardar datos en formato CSV</h1>
<ul>
<li>Tecleamos el comando <code>write</code> en la consola R, y pulsamos la tecla de tabulación <code>Tab</code>:</li>
</ul>
<center>
<img src="figure/write_csv.png" alt="Guardar en CSV (datos)"/>
</center>

<ul>
<li>La característica de RStudio que hemos usado se denomina <strong>completado de comandos</strong>.</li>
<li><p>De las opciones que nos ofrece, seleccionamos <code>write.csv</code>, y seguimos escribiendo un paréntesis <code>(</code>, que RStudio completará con otro párentesis <code>)</code>.</p></li>
<li><p>Continuamos escribiendo el comando, indicando en el primer parámetro el objeto <code>ddt</code>, y en el segundo parámetro, el nombre del fichero a guardar en el directorio <code>data</code>:</p></li>
</ul>
<center>
<img src="figure/write_csv_data.png" alt="Guardar en CSV (fichero)"/>
</center>

<ul>
<li>La función que hemos usado ahora se denomina <strong>completado de carpetas/ficheros</strong>.</li>
<li>Como nombre del fichero, seleccionamos la carpeta <code>data</code>, y ponemos el nombre <code>ddt.csv</code>.</li>
<li>Terminamos de escribir el comando con el último parámetro, para indicar que no queremos que guarde el nombre (número) de cada fila:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(ddt, <span class="st">&quot;data/ddt.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</code></pre>
<ul>
<li>Podemos ver el fichero creado en el directorio <code>data</code>, y haciendo clic sobre él, nos mostrará el contenido:</li>
</ul>
<center>
<img src="figure/ddt_csv.png" alt="Data frame ddt"/>
</center>


</div>
<div id="historial-de-rstudio" class="slide section level1">
<h1>Historial de RStudio</h1>
<ul>
<li>Hay tres formas para re-usar los comandos ya tecleados en RStudio:
<ul>
<li>Pulsando las teclas de fecla arriba o abajo.</li>
<li>Pulsando <strong>Ctrl+▲</strong>.</li>
</ul></li>
</ul>
<center>
<img src="figure/History_Ctrl+Up.png" alt="Historial con Ctrl+Up"/>
</center>

<ul>
<li>Explorando la pestaña <strong>History</strong> en el panel derecho superior:</li>
</ul>
<center>
<img src="figure/History.png" alt="Historial"/>
</center>

<ul>
<li>Se puede seleccionar un comando o varios (usando la tecla <code>Shift</code>=<code>Mayúsc</code>), y ejecutar pulsando <code>Enter</code>.</li>
<li>Asimismo, se pueden salvar a un fichero llamado <code>.Rhistory</code>, en la carpeta del proyecto.</li>
<li>También se pueden pasar a la consola con el comando <strong>To Console</strong> para ser ejecutados, o a un script directamente con el botón <strong>To Source</strong>.</li>
<li>Por último, se pueden eliminar con la tecla <code>Supr</code> (<code>Del</code>) o con el botón correspondiente, o borrar completamente todo el historial con el botón de la escoba.</li>
</ul>
</div>
<div id="primer-script-r-en-rstudio" class="slide section level1">
<h1>Primer script R en RStudio</h1>
<ul>
<li>Una vez cargados los datos, vamos a escribir el primer script en lenguaje R para hacer un primer análisis.</li>
<li>Hacemos click en el icono <strong>+</strong> verde del editor de scripts (izquierdo superior), y elegimos <strong>R Script</strong>.</li>
</ul>
<center>
<img src="figure/New_R_script.png" alt="Nuevo script de R"/>
</center>
<center>
<img src="figure/Untitled1.png" alt="Untitled1"/>
</center>

<ul>
<li>Las acciones más interesantes sobre un script de R son:
<ul>
<li><strong>Disco</strong>: salvar el fichero.</li>
<li><strong>Lupa</strong>: buscar y reemplazar.</li>
<li><strong>Varita mágica</strong>: herramientas útiles (algunas las veremos luego).</li>
<li><strong>Run</strong>: ejecuta el código seleccionado (<strong>Ctrl+Enter</strong>).</li>
<li><strong>Re-Run</strong>: ejecuta el último código que seleccionamos.</li>
<li><strong>Cuaderno</strong>: compila el script R a un fichero HTML (lo veremos luego).</li>
</ul></li>
<li>Las opciones del tipo <strong>Source</strong> sirven para cargar el código fuente al espacio de trabajo de R (lo veremos luego).</li>
<li>Vamos a introducir los primeros comandos R en el script:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estructura de los datos</span>
<span class="kw">str</span>(ddt)

<span class="co"># resumen de los datos</span>
<span class="kw">summary</span>(ddt)</code></pre>
<ul>
<li>Guardamos este script pulsando el botón del disco (arriba), o en el menú <strong>File &gt; Save</strong>, con el nombre <code>funciones.R</code> en el directorio <code>R</code> de nuestro proyecto.</li>
</ul>
<center>
<img src="figure/funciones_R.png" alt="funcionesR"/>
</center>

<ul>
<li>Una vez guardado, podemos ejecutar el script de varias formas:
<ul>
<li>Sobre la línea en la que estamos, pulsamos el botón <strong>Run</strong> o <strong>Ctrl+Enter</strong>.</li>
<li>O seleccionamos todo el script, y hacemos lo mismo que en el punto anterior.</li>
</ul></li>
</ul>
<center>
<img src="figure/Run_funciones_R.png" alt="Ejecutar funcionesR"/>
</center>


</div>
<div id="usando-la-ayuda" class="slide section level1">
<h1>Usando la ayuda</h1>
<ul>
<li>Ahora es buen momento para empezar a usar la ayuda para, por ejemplo, el comando <code>summary</code>:</li>
</ul>
<center>
<img src="figure/Help_summary.png" alt="Ayuda de summary"/>
</center>


</div>
<div id="extracción-de-funciones" class="slide section level1">
<h1>Extracción de funciones</h1>
<ul>
<li>Una de las características más interesantes de RStudio es la posibilidad de crear funciones a partir de trozos de código.</li>
<li>Por ejemplo, vamos a crear una función llamada <code>Resumen</code>, que recibe un parámetro <code>datos</code>, y ejecuta los dos comandos que acabamos de escribir.</li>
<li>Para ello, cambiamos <code>ddt</code> por <code>datos</code> en ambos comandos.</li>
<li>Seleccionamos las líneas del código.</li>
<li>Pulsamos sobre la “varita mágica” en la opción <strong>Extract Function</strong>, y le damos el nombre <code>Resumen</code>.</li>
</ul>
<center>
<img src="figure/Extract_Function.png" alt="Extraer función"/>
</center>

<ul>
<li>Añadimos finalmente un comentario para describir el objetivo de la función.</li>
<li>Por último, salvamos el script.</li>
</ul>
<center>
<img src="figure/function_Resumen.png" alt="Function Resumen"/>
</center>


</div>
<div id="ejecutando-funciones-propias" class="slide section level1">
<h1>Ejecutando funciones propias</h1>
<ul>
<li>Si tecleamos la siguiente línea en la consola de R, nos dará un error:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Resumen</span>(ddt)</code></pre>
<pre><code>## Error: no se pudo encontrar la función &quot;Resumen&quot;</code></pre>
<ul>
<li>Esto sucede porque la función Resumen no ha sido cargada (<em>sourced</em>) al entorno o espacio de trabajo de nuestro proyecto.</li>
<li>Para poder usar la función <code>Resumen(datos)</code> tenemos que hacer lo siguiente:</li>
</ul>
<center>
<img src="figure/Source_Resumen.png" alt="Source Resumen"/>
</center>

<ul>
<li>Si hubiéramos elegido la opción <strong>Source with Echo</strong>, obtendríamos el mismo resultado además de mostrar todo el código cargado.</li>
<li>Las funciones cargadas aparecen, al igual que los datos, en el panel derecho superior de <strong>Environment</strong>, en la sección de <strong>Functions</strong>.</li>
<li>Ya podemos usar nuestra nueva función <code>Resumen</code> pasándole como parámetro los datos de <code>ddt</code>:</li>
</ul>
<center>
<img src="figure/Console_Resumen.png" alt="Consola Resumen"/>
</center>

<ul>
<li>Si vamos a estar cambiando la función continuamente, podemos activar la opción <strong>Source on Save</strong> para que la cargue al entorno automáticamente después de salvar el script.</li>
</ul>
</div>
<div id="secciones-del-código" class="slide section level1">
<h1>Secciones del código</h1>
<ul>
<li>Otra característica interesante de RStudio (y no de R) es la posibilidad de estructurar el código en secciones.</li>
<li>Las secciones se pueden crear desde el menú <strong>Code &gt; Insert Section</strong>, o simplemente poniendo un comentario (<code>#</code>) con un nombre de sección y acabado en 4 guiones (<code>----</code>):</li>
</ul>
<pre><code># &lt;NombreDeLaSección&gt; ----</code></pre>
<ul>
<li>Podemos aprovechar el comentario de la función Resumen para hacer nuestra primera sección:</li>
</ul>
<center>
<img src="figure/Section_Resumen.png" alt="Sección Resumen"/>
</center>

<ul>
<li>Fíjense que dicha sección aparece en la parte inferior del editor como <strong>navegación del código</strong>, que luego veremos.</li>
</ul>
</div>
<div id="plegado-de-códigosecciones" class="slide section level1">
<h1>Plegado de código/secciones</h1>
<ul>
<li>Otra característica muy útil de RStudio es el plegado de las secciones o de partes del código que estén rodeadas por llaves <code>{}</code>.</li>
<li>Al plegarse aparecerá un pequeño triángulo que permite colapsar o expandir el bloque de código.</li>
</ul>
<center>
<img src="figure/Folded_Resumen.png" alt="Código plegado de Resumen"/>
</center>


</div>
<div id="navegación-de-código" class="slide section level1">
<h1>Navegación de código</h1>
<ul>
<li>La navegación de código en RStudio es una utilidad que permite editar el código de forma más rápida.</li>
<li>Se puede acceder a una línea concreta pulsando <strong>Alt+Shift+G</strong>, o en el menú <strong>Edit &gt; Go to Line…</strong></li>
<li>Con la opción <strong>Code &gt; Jump To…</strong> (<strong>Alt+Shift+J</strong>) se puede saltar directamente a funciones o secciones del código.</li>
</ul>
<center>
<img src="figure/Jump_To.png" alt="Navegación código Jump To"/>
</center>

<ul>
<li>Otra opción muy útil es la de ir a un fichero/función determinado usando <strong>Code &gt; Go To File/Function</strong> (<strong>Ctrl+.</strong>). RStudio mostrará todos los ficheros o funciones dentro del directorio de trabajo que empiecen con los caracteres tecleados.</li>
</ul>
<center>
<img src="figure/Go_To_File_Function.png" alt="Navegación código Go To File/Function"/>
</center>


</div>
<div id="visualización-de-datos" class="slide section level1">
<h1>Visualización de datos</h1>
<ul>
<li>La visualización (o dibujado de gráficos) es una parte esencial del análisis de datos. RStudio tiene un panel específico para la visualización de datos (<strong>Plots</strong>) abajo a la derecha.</li>
<li>Para ilustrar el manejo de las instrucciones de visualización, vamos a usar escribir el siguiente código dentro de nuestro script de R debajo de la función <code>Resumen</code>:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># cargamos los datos del fichero</span>
ddt &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/ddt.csv&quot;</span>)

<span class="co"># pesos de la especie “catfish”</span>
catfish.weight &lt;-<span class="st"> </span>ddt$weight[ddt$species_name ==<span class="st"> &quot;catfish&quot;</span>]

<span class="co"># histograma del peso de los “catfish”</span>
<span class="kw">hist</span>(catfish.weight)</code></pre>
<div class="figure">
<img src="figure/Histograma.png" />
</div>
<ul>
<li>Al teclear <code>ddt$</code> podemos pulsar la tecla <code>Tab</code> para que nos muestre la lista de variables de ddt. Esto se denomina <strong>completado de objetos</strong>.</li>
</ul>
</div>
<div id="opciones-de-la-pestaña-plot" class="slide section level1">
<h1>Opciones de la pestaña <strong>Plot</strong></h1>
<ul>
<li>Con la opción <strong>Zoom</strong> se abre una nueva ventana con una versión más grande del gráfico.</li>
<li>El botón <strong>Export</strong> nos permite guardar el gráfico como una imagen en varios formatos (PNG, JPEG, TIFF, etc) o como un fichero PDF.</li>
<li>También podemos copiar el gráfico actual al portapapeles del sistema.</li>
<li>En caso de haber generado varios gráficos, las flechas permiten avanzar o retroceder en la visualización de dichos gráficos.</li>
</ul>
<center>
<img src="figure/Save_Plot_as_Image.png" width="50%" alt="Save Plot as Image"/>
</center>


</div>
<div id="el-comando-plot" class="slide section level1">
<h1>El comando <code>plot</code></h1>
<ul>
<li>Una vez vista la forma de trabajar con gráficos dentro de RStudio vamos a ver opciones más avanzadas de los mismos.</li>
<li>Uno de los comandos más útiles para dibujar gráficos en R es <code>plot</code>.</li>
<li>La librería que contiene el comando <code>plot</code> es <code>graphics</code>, la cual suele estar cargada por defecto. En caso de no estarlo, habria que ejecutar el siguiente comando:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># librería necesaria para &#39;plot&#39;</span>
<span class="kw">library</span>(graphics)</code></pre>
<ul>
<li>El gráfico más simple es dibujar simplemente los pesos de la especie <code>catfish</code>:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gráfico de los pesos de todos los catfish</span>
<span class="kw">plot</span>(catfish.weight)</code></pre>
<div class="figure">
<img src="figure/plot_pesos_de_los_catfish.png" />
</div>
<ul>
<li>En primer lugar, vamos a añadir color, unas nuevas etiquetas en los ejes (<code>xlab</code>, <code>ylab</code>) y el título principal (<code>main</code>), además de una línea en el eje Y que indica la media de los valores.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(catfish.weight, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Longitud&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Peso&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Pesos de los catfish&quot;</span>)

<span class="co"># línea horizontal que marca la media de los pesos</span>
<span class="kw">abline</span>(<span class="kw">mean</span>(catfish.weight), <span class="dv">0</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">lwd=</span><span class="dv">2</span>)</code></pre>
<div class="figure">
<img src="figure/plot_pesos_de_los_catfish___etiquetas.png" />
</div>
<ul>
<li>Ahora, podemos dibujar un gráfico que muestre la longitud (<code>length</code>) frente al peso (<code>weight</code>) de la especie <code>catfish</code>.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># longitudes de la especie &quot;catfish&quot;</span>
catfish.length  &lt;-<span class="st"> </span>ddt$length[ddt$species_name ==<span class="st"> &quot;catfish&quot;</span>]

<span class="co"># gráfico de comparación de la longitud vs. peso de los &quot;catfish&quot;</span>
<span class="kw">plot</span>(<span class="dt">x=</span>catfish.length, <span class="dt">y=</span>catfish.weight, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Longitud&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Peso&quot;</span>, 
     <span class="dt">main=</span><span class="st">&quot;Longitud vs. Peso de los catfish&quot;</span>)</code></pre>
<div class="figure">
<img src="figure/plot_longitud_vs__peso.png" />
</div>
</div>
<div id="instalación-de-paquetes-en-rstudio" class="slide section level1">
<h1>Instalación de paquetes en RStudio</h1>
<ul>
<li>Antes de ver el comando <code>qplot</code>, tenemos que aprender como instalar nuevos paquetes de R.</li>
<li>Una de las pestañas más interesantes en el lado derecho es <strong>Packages</strong> (paquetes):</li>
</ul>
<center>
<img src="figure/Packages.png" alt="Packages"/>
</center>

<ul>
<li><strong>Check for Updates</strong>: permite actualizar los paquetes a sus últimas versiones.</li>
<li><strong>Install Packages</strong>: permite instalar paquetes desde <strong>CRAN</strong> (repositorio).</li>
</ul>
<center>
<img src="figure/Install_Packages.png" alt="Instalación de paquetes"/>
</center>

<ul>
<li>Se puede conseguir el mismo efecto con el siguiente comando:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;&lt;Nombre_de_la_librería&gt;&quot;</span>)</code></pre>
</div>
<div id="la-función-qplot" class="slide section level1">
<h1>La función <code>qplot</code></h1>
<ul>
<li>El comando <code>qplot</code>es una versión &quot;<em>quick</em>&quot; del comando <code>plot</code>, y permite crear gráficos complejos y avanzados de forma simple y rápida.</li>
<li>Este comando está en la librería <code>ggplot2</code>. Para usar dicha libreria podemos ejecutar el siguiente comando:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre>
<ul>
<li><p>En caso de que no esté instalada, habria que seguir los pasos descritos en la diapositiva de <a href="RStudio.html#(24)">Instalación de paquetes en RStudio</a>.</p></li>
<li><p>Por ejemplo, podemos hacer un gráfico rápido que permite visualizar la longitud (<code>length</code>) frente al peso (<code>weight</code>) del conjunto de datos <code>ddt</code>.</p></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># longitud vs. peso de todos los peces</span>
<span class="kw">qplot</span>(length, weight, <span class="dt">data =</span> ddt, <span class="dt">col =</span> species_name)</code></pre>
<div class="figure">
<img src="figure/qplot_longitud_peso_de_ddt.png" />
</div>
<ul>
<li>Incluso podemos añadir una línea de tendencia (con un margen de error) a cada especie, simplemente añadiendo (sumando) la función <code>geom_smooth()</code>:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(length, weight, <span class="dt">data =</span> ddt, <span class="dt">col =</span> species_name) +<span class="st"> </span><span class="kw">geom_smooth</span>()</code></pre>
<div class="figure">
<img src="figure/qplot_longitud_peso_de_ddt___geom_smooth.png" />
</div>
<ul>
<li>Podemos usar las opciones que ya conocemos del comando <code>plot</code> para personalizar este gráfico:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(length, weight, <span class="dt">data=</span>ddt, <span class="dt">col=</span>species_name, <span class="dt">xlab=</span><span class="st">&quot;Longitud&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Peso&quot;</span>,
      <span class="dt">main=</span><span class="st">&quot;Relación longitud/peso&quot;</span>) +<span class="st"> </span><span class="kw">geom_smooth</span>()</code></pre>
<div class="figure">
<img src="figure/qplot_longitud_peso_de_ddt___geom_smooth___labels.png" />
</div>
<ul>
<li>Finalmente, podemos usar <code>qplot</code> para generar también un histograma de los pesos de las tres especies juntas de forma automática:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># histograma usando &#39;qplot&#39;</span>
<span class="kw">qplot</span>(weight, <span class="dt">data =</span> ddt, <span class="dt">fill =</span> species_name)</code></pre>
<div class="figure">
<img src="figure/Histograma_usando_qplot.png" />
</div>
</div>
<div id="el-comando-manipulate" class="slide section level1">
<h1>El comando <code>manipulate</code></h1>
<ul>
<li>RStudio permite controlar de forma dinámica los gráficos generados con R.</li>
<li>El comando que permite la interactividad entre el usuario y los gráficos generados.</li>
<li>Las opciones de controles que permite <code>manipulate</code>:
<ul>
<li><code>slider</code>: control para un rango (min, max) numérico.</li>
<li><code>picker</code>: control sobre un conjunto de opciones fijas.</li>
<li><code>checkbox</code>: control de casilla de verificación.</li>
<li><code>button</code>: control de botón.</li>
</ul></li>
<li>Vamos a ver un pequeño ejemplo:</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># control de selección para elegir la especie de pez</span>
<span class="kw">library</span>(manipulate)
<span class="kw">manipulate</span>(
  <span class="kw">hist</span>(ddt$weight[ddt$species_name ==<span class="st"> </span>fish], <span class="dt">xlab=</span><span class="st">&quot;Peso&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Frecuencia&quot;</span>, 
       <span class="dt">main=</span><span class="kw">paste</span>(<span class="st">&quot;Histograma del peso de los&quot;</span>, fish)),
  <span class="dt">fish =</span> <span class="kw">picker</span>(<span class="st">&quot;bass&quot;</span>, <span class="st">&quot;buffalo&quot;</span>, <span class="st">&quot;catfish&quot;</span>)
  )</code></pre>
<center>
<img src="figure/manipulate.png" alt="Ejemplo de manipulate"/>
</center>


</div>
<div id="generando-informes-html-a-partir-de-scripts-de-r" class="slide section level1">
<h1>Generando informes HTML a partir de scripts de R</h1>
<ul>
<li>RStudio posee una opción que permite compilar un fichero script de R en HTML directamente (<strong>Compile Notebook</strong>).</li>
<li>Dicha opción se encuentra, en cualquier script de R, al final de la barra de herramientas del panel de edición, con forma de cuaderno, o en la opción del menú <strong>File &gt; Compile Notebook...</strong></li>
<li>Al pulsar el icono, nos aparece la siguiente ventana:</li>
</ul>
<center>
<img src="figure/Compile_Notebook_from_R_script.png" alt="Generando HTML desde el script de R"/>
</center>

<ul>
<li>Pulsamos el boton <strong>Compile</strong> y obtenemos la vista previa del fichero HTML generado:</li>
</ul>
<center>
<img src="figure/Preview_HTML.png" alt="Vista previa del informe HTML"/>
</center>


</div>
<div id="atajos-de-teclado" class="slide section level1">
<h1>Atajos de teclado</h1>
<ul>
<li>Como se ha visto a lo largo de este curso sobre RStudio, existen múltiples formas de realizar la misma acción dentro del entorno, a saber, desde los botones, el menú o los atajos de teclado.</li>
<li>En cada apartado, se han ido comentado algunos atajos de teclado que pueden resultar interesantes.</li>
<li>La tabla que contiene todos los atajos se puede obtener en el menú <a href="file:///C:/Program%20Files/RStudio/www/docs/keyboard.html"><strong>Help &gt; Keyboard Shortcuts</strong></a>.</li>
</ul>
<center>
<img src="figure/Keyboard_Shortcuts.png" width="80%" alt="Atajos de teclado"/>
</center>


</div>
<div id="ejercicios" class="slide section level1">
<h1>Ejercicios</h1>
<ol style="list-style-type: decimal">
<li>Hacer una función en R que muestre los histogramas de frecuencias de los pesos de las tres especies (<code>catfish</code>, <code>buffalo</code> y <code>bass</code>) en uno solo usando el comando <code>hist</code>. (<strong>Pista</strong>: empezar por la especie <code>catfish</code> y usar <code>add=TRUE</code>).</li>
</ol>
<div class="figure">
<img src="figure/Ejercicio_1.png" />
</div>
<ol start="2" style="list-style-type: decimal">
<li>Hacer una función que use el comando <code>manipulate</code> sobre el comando <code>qplot</code>para que el usuario elija la especie sobre la cual quiere comparar la longitud (<code>length</code>) contra el peso (<code>weight</code>).</li>
</ol>
<center>
<img src="figure/Ejercicio_2.png" alt="Ejercicio "/>
</center>





</div>
<div id="futuro-de-rstudio" class="slide section level1">
<h1>Futuro de RStudio</h1>
<ul>
<li><a href="http://shiny.rstudio.com/">Shiny by RStudio</a>: <em>A web application framework for R</em>.</li>
</ul>
<center>
<img src="figure/Shiny.png" width="100%" alt="Shiny"/>
</center>


</div>
<div id="referencias" class="slide section level1">
<h1>Referencias</h1>
<ul>
<li><a href="https://support.rstudio.com/hc/en-us/categories/200035113-Documentation">RStudio Support</a>: web de soporte de RStudio.</li>
<li><a href="http://www.rstudio.com/training">RStudio Training</a>: página de formación de RStudio.</li>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/Rguide.xml">Google's R Style Guide</a>: guía de estilo de programación en R según Google.</li>
</ul>
<!---
Comentario 
-->


</div>
</body>
</html>
